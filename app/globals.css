@import "tailwindcss";
@import "./theme.css";

/* 1. GLOBAL RESET & BASE */
@layer base {
  body {
    @apply antialiased font-sans;
    background-color: var(--color-canvas);
    background-image:
      radial-gradient(at 0% 0%, oklch(var(--obsidian-cobalt) / 0.25) 0px, transparent 55%),
      radial-gradient(at 100% 0%, oklch(var(--radiant-cyan) / 0.3) 0px, transparent 60%),
      radial-gradient(at 100% 100%, oklch(var(--intelligence-indigo) / 0.2) 0px, transparent 50%),
      radial-gradient(at 0% 100%, oklch(var(--victory-emerald) / 0.15) 0px, transparent 50%),
      url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    background-blend-mode: normal, normal, normal, normal, overlay;
    color: var(--color-body);
    height: 100dvh;
    width: 100%;
    overflow: hidden;
    transition: background-color 0.8s var(--ease-out-expo), color 0.8s var(--ease-out-expo);
  }

  /* Universal Selection logic with RCS */
  ::selection {
    background-color: oklch(from var(--color-primary) l c h / 0.2);
    color: var(--color-body);
  }
}

/* 2. TAILWIND 4 SUPREME UTILITIES */
@utility action-gravity {
  transition: all 0.4s var(--ease-out-expo);

  &:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: var(--shadow-action);
    border-color: oklch(from var(--color-secondary) l c h / 0.4);
  }
}

@utility specular-border {
  position: relative;

  &::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    background: linear-gradient(135deg, oklch(100% 0 0 / 0.1), transparent 40%, oklch(100% 0 0 / 0.05) 100%);
    box-shadow: inset 0 1px 0 0 oklch(100% 0 0 / 0.05);
  }
}

@utility custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: oklch(from var(--color-muted) l c h / 0.3) transparent;

  &::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: oklch(from var(--color-muted) l c h / 0.3);
    border-radius: 10px;

    &:hover {
      background: oklch(from var(--color-muted) l c h / 0.5);
    }
  }
}

/* 3. PERCEPTUAL GHOST SYSTEM (JS-less Visibility) */
@utility ghost-expansion {
  @apply transition-opacity duration-300 delay-75 opacity-0;
  transition-timing-function: var(--ease-out-expo);

  /* Using :has() for 2026 Native interaction tracking */
  :is(.group:hover, .group:focus-within, .group[data-has-content="true"]) & {
    @apply opacity-50;
  }

  &:hover {
    @apply !opacity-100;
  }
}

/* Chrome Field Sizing for 2026 Auto-Grow */
@utility auto-grow {
  field-sizing: content;
  min-height: 3rem;
  max-height: 400px;
}

/* 2026 Context-Aware Layouts (@container) */
@utility toolbar-layout {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.75rem;

  @container (max-width: 500px) {
    gap: 0.5rem;
    padding: 0.5rem;
  }
}

@utility text-glow-primary {
  text-shadow: 0 0 20px oklch(var(--radiant-cyan) / 0.3);
}

@utility shadow-depth {
  box-shadow: 0 20px 50px -12px oklch(0% 0 0 / 0.15);
}

/* Custom Scroll Handling */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* 2026 INCLUSIVE STANDARDS */
@media (prefers-reduced-motion: reduce) {

  *,
  ::before,
  ::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}